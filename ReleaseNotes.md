Release Notes
===

See [the release note page](https://github.com/xerial/sbt-sonatype/releases) for the latest release notes. 

# 3.9.14
 
- Upgraded airframe-http to 22.11.0
- Add more Sonatype API error handling
- Upgrade to sbt 1.7.3
- Use sbt-dynver for versioning

# 3.9.13

- Upgraded airframe-http to 22.5.0 to fix JDK17-specific error [#293](https://github.com/xerial/sbt-sonatype/issues/293)
- Reverted the fix for #276 due to the regression


# 3.9.12 
- DO NOT USE THIS VERSION. A regression, which failed to find a proper sonatype credential, is reported. Use 3.9.11 instead
- A fix for [#276](https://github.com/xerial/sbt-sonatype/issues/276): Always use `ThisBuild / sonatypeCredentialHost` setting [#285](https://github.com/xerial/sbt-sonatype/pull/285)

# 3.9.11
- Use unique names for resolvers to support s01.oss.sonatype.org [#279](https://github.com/xerial/sbt-sonatype/pull/#279)
- Increase the max retry to 100, timeoutMillis to 3 hours for big projects
- [internal] Upgrade to airframe 22.1.0

# 3.9.10
- Improve the cache management to support s01.oss.sonatype.org
- Internal: Upgrade to airframe 21.8.1 (no scala-parser-combinator dependency)

# 3.9.9
- Remove scala-parser-combinator 2.x dependency. This is a workaround for sbt-pgp, which still depends on scala-parser-combinators 1.x.

# 3.9.8
- Scope sonatypeCredentialHost to the build instead of projects. (#242)
- internal: Upgrade to airframe 21.8.0

# 3.9.7
- 2021-03-12
- Fixes a bug in releasing snapshot artifacts to the new s01.oss.sonatype.org repository.

# 3.9.6
- 2021-03-10
- Support a new sonatype host with `sonatypeCredentialHost := "s01.oss.sonatype.org"` setting
- internal: Upgrade to airframe 21.3.0

# 3.9.5
- 2020-11-02
- Fixes an issue when different versions of sub modules exist [#197](https://github.com/xerial/sbt-sonatype/issues/197)

# 3.9.4
- 2020-07-03
- Use URLConnection based HTTP client to remove the dependency to Finagle and Jackson
- internal: Upgrade to airframe-http 20.6.2

# 3.9.3
- 2020-06-19
- Fixes an issue when using `sbt "sonatypeReleaseAll (sonatypeProfileName)` standalone without build.sbt file. 
- Using GitHub Actions for CI

# 3.9.2
- 2020-03-27
- Use a longer total timeout (upto 10 min.) for individual HTTP requests to address an issue like [#149](https://github.com/xerial/sbt-sonatype/issues/149)

# 3.9.1
- 2020-03-27
- Adjust the wait interval for close/promote stages
- Fixed a bug so as not to retry the create staging repository request 

# 3.9.0
- 2020-03-26
- __This version has an issue in creating staging repositories. Use 3.9.1__
- Add sonatypeTimeoutMillis to wait longer time until close/promote stage completes. The default is 60 minutes.
- Changed the backend HTTP client to airframe-http-finagle
- Use JSON REST API of Sonatype instead of handling XML
- Add retry for each HTTP request and bundle upload
- Use ANSI colors for logging messages
- Improved error messages

# 3.8.1
- 2019-11-20
- Fix for the credential resolver to support sbt-gpg [#124](https://github.com/xerial/sbt-sonatype/pull/124)

# 3.8
- 2019-09-27
- Show log message periodically to avoid Travis CI 10 minutes timeout [#108](https://github.com/xerial/sbt-sonatype/issues/108)

# 3.7
- 2019-09-11
- Upgrade http-client version to address NoClassDefFound error.

# 3.6
- 2019-09-06
- Support dynamic versions generated by sbt-dynver.

# 3.5
- 2019-09-06
- A minor fix for multi-module projects to use a single staging folder [#94](https://github.com/xerial/sbt-sonatype/pull/94)

# 3.4
- 2019-09-05
- Added sonatypeBundleRelease as a short cut for `sonatypePrepare; sonatypeUploadBundle; sonatypeRelease`

# 3.2
- 2019-09-05
- Re-built for sbt 1.2.8

# 3.1
- September 5, 2019
- Support `sonatypeBundleUpload`, which makes uploading hundreds of artifacts much faster than directly uploading them to Sonatype. [#89](https://github.com/xerial/sbt-sonatype/issues/89)

# 3.0
- September 4, 2019
- Support building idempotent release flow using `sonatypePrepare`
- Support parallel artifact upload flows. See https://github.com/xerial/sbt-sonatype/#uploading-artifacts-in-parallel for the details.
- Parallelize the processing of sonatypeReleaseAll and sonatypeDropAll
- Drop `sontaypeList`. Use sonatypeStagingRepositoryProfiles instead
- From this version, sbt-sonatype no longer overwrites `publishTo` settings automatically after `sonatypeOpen` command. Make sure setting `publishTo := sonatypePublishTo.value`.

# 2.6
- Added `sonatypeDropAll`

# 2.5
- Fixes issue #79

# 2.4
- Fixes a bug in propagating publishTo setting to sub projects [#76](https://github.com/xerial/sbt-sonatype/issues/76)
- Drop sbt 0.13.x support

# 2.3
- Allow setting the credentials with the environment variables `SONATYPE_USERNAME` and `SONATYPE_PASSWORD`

# 2.2
- Fixes typo [#61](https://github.com/xerial/sbt-sonatype/pull/61) in GitHubHosting and GitLabHosting capitilization
- If you are not using these keys, no need to upgrade to this version.

# 2.1
- Fixes [#55](https://github.com/xerial/sbt-sonatype/issues/55) with `sonatypePublishTo` setting:
```scala
publishTo := sonatypePublishTo
```
- Add shortcut `sonatypeProjectHosting` for quickly setting `homepage`, `scmInfo` and `developers`


# 2.0
- Support sbt-0.13, 1.0.0-M5, 1.0.0-M6, and 1.0.0-RC3

# 2.0.0-M1
- Add sbt-1.0.0-M5 (for Scala 2.12), sbt-0.13.x support
- **IMPORTANT** sbt-sonatype no longer modifies `publishTo` settings. You need to manually set the Sonatype repository name as below:
```scala
publishTo := Some(
  if (isSnapshot.value)
    Opts.resolver.sonatypeSnapshots
  else
    Opts.resolver.sonatypeStaging
)
```

# 1.1
- Add sonatypeOpen command for supporting more complex workflows (see the usage example in [workflow.md](workflow.md))

# 1.0
- The first major release (stable)

# 0.5.1
- `sonatypeReleaseAll (sonatypeProfileName)` command can be used standalone without preparing sbt project files.

# 0.5.0
 - sonatypeRelease etc. are now sbt Commands.
 - No need exists to include `sonatypeSettings`. This will be automcatically loaded

# 0.4.0
 - Simplified the configuration for multi-module build
 - Migration guide for 0.3.x, 0.2.x users: Just include `Sonatype.sonatypeSettings` in `(project root)/sonatype.sbt` file.

# 0.3.3
 - Retry request on 500 error from sonatype REST API
 - Improved log message

# 0.3.0
 - sbt-sonatype is now an auto plugin
 - Migration guide from 0.2.x
   - `profileName` -> `sonatypeProfileName`
   - No need to include sonatypeSettings
